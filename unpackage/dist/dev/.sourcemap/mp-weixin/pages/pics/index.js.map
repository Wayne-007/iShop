{"version":3,"file":"index.js","sources":["pages/pics/index.vue","pages/pics/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"pics\">\r\n\t\t<!-- 左边类别 -->\r\n\t\t<scroll-view class=\"left-box\" :scroll-y=\"true\">\r\n\t\t\t<view v-for=\"item in floorData\" :class=\"{\r\n\t\t\t\t'left-item':true,\r\n\t\t\t\t'left-item_active': currentItem?.floor_title?.name === item?.floor_title?.name\r\n\t\t\t\t}\" @click=\"handleCurrentItem(item)\">\r\n\t\t\t\t<text>{{item.floor_title.name}}</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<!-- 右边内容 -->\r\n\t\t<scroll-view scroll-y :show-scrollbar=\"false\" scroll-anchoring class=\"right-box\" :scroll-top=\"scrollTop\"\r\n\t\t\t@scroll=\"handleScroll\">\r\n\t\t\t<image :src=\"currentItem?.floor_title?.image_src\" mode=\"bottom left\" class=\"top-img\" lazy-load></image>\r\n\t\t\t<view class=\"right-item\" v-for=\"(item,index) in currentItem?.product_list\" :key=\"item.navigator_url\"\r\n\t\t\t\t@click.stop=\"preViewImg(item,index)\">\r\n\t\t\t\t<image :src=\"item.image_src\" class=\"item-img\" lazy-load></image>\r\n\t\t\t\t<view class=\"item-title\">\r\n\t\t\t\t\t{{`${item.name}：${item.navigator_url}`}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tgetCurrentInstance,\r\n\t\tnextTick,\r\n\t\tonMounted,\r\n\t\treactive,\r\n\t\tref\r\n\t} from 'vue'\r\n\r\n\tconst {\r\n\t\tproxy\r\n\t} = getCurrentInstance()\r\n\r\n\t// 预览图片\r\n\tconst preViewImg = (item, index) => {\r\n\t\tconst _urls = []\r\n\t\tcurrentItem.value?.product_list.forEach(el => {\r\n\t\t\t_urls.push(el.image_src)\r\n\t\t})\r\n\t\tuni.previewImage({\r\n\t\t\turls: _urls,\r\n\t\t\tcurrent: index,\r\n\t\t\tindicator: 'number', //\t限APP\r\n\t\t\tloop: true, //\t限APP\r\n\t\t})\r\n\t}\r\n\r\n\t// 获取楼层\r\n\tconst floorData = ref([])\r\n\tconst currentItem = ref({})\r\n\tconst getFloorData = () => {\r\n\t\tproxy?.$request({\r\n\t\t\turl: '/api/public/v1/home/floordata'\r\n\t\t}).then(data => {\r\n\t\t\tconsole.log(data)\r\n\r\n\t\t\tfloorData.value = data || []\r\n\t\t\tif (data.length) {\r\n\t\t\t\thandleCurrentItem(data[0] || {})\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\tfloorData.value = []\r\n\t\t})\r\n\t}\r\n\r\n\t// 设置选中项目\r\n\tconst handleCurrentItem = payload => {\r\n\t\tcurrentItem.value = payload\r\n\t\tgoTop()\r\n\t}\r\n\r\n\t// 右边滚动相关\r\n\tconst scrollTop = ref(0)\r\n\tconst old = reactive({\r\n\t\tscrollTop: 0\r\n\t})\r\n\r\n\tconst handleScroll = e => {\r\n\t\told.scrollTop = e.detail.scrollTop\r\n\t}\r\n\r\n\tconst goTop = () => {\r\n\t\t// 解决view层不同步的问题\r\n\t\tscrollTop.value = old.scrollTop\r\n\t\tnextTick(() => {\r\n\t\t\tscrollTop.value = 0\r\n\t\t})\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tgetFloorData()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\tpage {\r\n\t\twidth: 750rpx;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.pics {\r\n\t\twidth: 750rpx;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\r\n\t\t.left-box {\r\n\t\t\twidth: 200rpx;\r\n\t\t\theight: 100%;\r\n\t\t\tborder-right: 2rpx solid #ececec;\r\n\r\n\t\t\t.left-item {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tline-height: 120rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tborder-bottom: 2rpx solid #ececec;\r\n\t\t\t}\r\n\r\n\t\t\t.left-item_active {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #B50E03;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.right-box {\r\n\t\t\tflex: 1;\r\n\t\t\theight: auto;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t:deep(.uni-scroll-view-content) {\r\n\t\t\t\theight: auto;\r\n\t\t\t}\r\n\r\n\t\t\t.top-img {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tposition: sticky;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tz-index: 9;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t.right-item {\r\n\t\t\t\tpadding: 12rpx 12rpx 0;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tbackground-color: #ececec;\r\n\r\n\t\t\t\t.item-img {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.item-title {\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\theight: 72rpx;\r\n\t\t\t\t\tline-height: 36rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/wayne/Documents/MyProject/iShop/pages/pics/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","uni","ref","reactive","nextTick","onMounted"],"mappings":";;;;;AAmCC,UAAM;AAAA,MACL;AAAA,IACA,IAAGA,iCAAoB;AAGxB,UAAM,aAAa,CAAC,MAAM,UAAU;;AACnC,YAAM,QAAQ,CAAE;AAChB,wBAAY,UAAZ,mBAAmB,aAAa,QAAQ,QAAM;AAC7C,cAAM,KAAK,GAAG,SAAS;AAAA,MAC1B;AACEC,oBAAAA,MAAI,aAAa;AAAA,QAChB,MAAM;AAAA,QACN,SAAS;AAAA,QACT,WAAW;AAAA;AAAA,QACX,MAAM;AAAA;AAAA,MACT,CAAG;AAAA,IACD;AAGD,UAAM,YAAYC,cAAG,IAAC,EAAE;AACxB,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,eAAe,MAAM;AAC1B,qCAAO,SAAS;AAAA,QACf,KAAK;AAAA,MACR,GAAK,KAAK,UAAQ;AACfD,sBAAAA,MAAY,MAAA,OAAA,8BAAA,IAAI;AAEhB,kBAAU,QAAQ,QAAQ,CAAE;AAC5B,YAAI,KAAK,QAAQ;AAChB,4BAAkB,KAAK,CAAC,KAAK,EAAE;AAAA,QAC/B;AAAA,MACJ,GAAK,MAAM,SAAO;AACf,kBAAU,QAAQ,CAAE;AAAA,MACvB;AAAA,IACE;AAGD,UAAM,oBAAoB,aAAW;AACpC,kBAAY,QAAQ;AACpB,YAAO;AAAA,IACP;AAGD,UAAM,YAAYC,cAAG,IAAC,CAAC;AACvB,UAAM,MAAMC,cAAAA,SAAS;AAAA,MACpB,WAAW;AAAA,IACb,CAAE;AAED,UAAM,eAAe,OAAK;AACzB,UAAI,YAAY,EAAE,OAAO;AAAA,IACzB;AAED,UAAM,QAAQ,MAAM;AAEnB,gBAAU,QAAQ,IAAI;AACtBC,oBAAAA,WAAS,MAAM;AACd,kBAAU,QAAQ;AAAA,MACrB,CAAG;AAAA,IACD;AAEDC,kBAAAA,UAAU,MAAM;AACf,mBAAc;AAAA,IAChB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChGF,GAAG,WAAW,eAAe;"}